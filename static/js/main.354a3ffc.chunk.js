(this["webpackJsonpshoppies-by-daria"]=this["webpackJsonpshoppies-by-daria"]||[]).push([[0],{16:function(e,t,s){},17:function(e,t,s){},18:function(e,t,s){"use strict";s.r(t);var n=s(0),i=s(1),a=s.n(i),o=s(9),r=s.n(o),c=(s(16),s(3)),l=s(4),h=s(2),d=s(6),u=s(5),j=(s(17),s.p+"static/media/logo.16794c45.svg");var b=function(){return Object(n.jsxs)("header",{className:"grid-container",children:[Object(n.jsxs)("div",{className:"heading",children:[Object(n.jsx)("img",{className:"logo",src:j,alt:"The Shoppies Movie Awards logo"}),Object(n.jsx)("h1",{children:"The Shoppies"})]}),Object(n.jsx)("span",{className:"subheading",children:"First movie award that recognizes the entrepreneurial spirit"}),Object(n.jsx)("div",{className:"button-container",children:Object(n.jsx)("a",{href:"#search",children:Object(n.jsx)("button",{className:"header-button",children:"Nominate directors"})})})]})};var m=function(){return Object(n.jsxs)("section",{className:"intro grid-container",children:[Object(n.jsx)("h2",{children:"Recognizing film entrepreneurs"}),Object(n.jsxs)("article",{children:[Object(n.jsx)("p",{children:"There is one thing that Shopify store owners and movie directors have in common: they are all entrepreneurs. Both are driven by their vision; both make a thousand crucial decisions every day, both overcome obstacles to bring their dreams to life."}),Object(n.jsx)("p",{children:"In today\u2019s world, when movie theatres remain closed around the world, we would like to honour our favourite movie directors in a new way \u2014 by awarding them with The Shoppies, the first movie award based on the votes of eCommerce entrepreneurs."})]})]})};var p=function(e){return Object(n.jsxs)("section",{className:"submitted grid-container",children:[Object(n.jsx)("h2",{children:"Thank you!"}),Object(n.jsxs)("article",{children:[Object(n.jsx)("p",{children:"Your Shoppies nominations have been submitted."}),Object(n.jsx)("p",{children:"The winners will be announced no later than February 12, 2021."}),Object(n.jsx)("p",{children:"Stay tuned!"})]})]})},v=s(7);var O=function(e){return Object(n.jsx)("section",{className:"search",children:Object(n.jsxs)("form",{className:"search-bar box",onSubmit:e.handleSubmit,children:[Object(n.jsxs)("label",{children:["We invite you to acknowledge your favourite directors by nominating their movies in the search results below.",Object(n.jsx)("br",{}),"Please select 5 movies."]}),Object(n.jsxs)("fieldset",{children:[Object(n.jsx)("input",{name:"search-text",id:"search-text-field",placeholder:"Search for the movie to nominate",value:e.searchTerm,onChange:e.handleChange,type:"search",style:{fontSize:"1em"}}),Object(n.jsx)("button",{className:"search-button",value:"Submit",children:Object(n.jsx)("span",{className:"fas fa-search"})})]})]})})};var f=function(e){return Object(n.jsxs)("section",{className:"banner box",children:[Object(n.jsx)("p",{children:"You have reached the maximum amount of nominations. Ready to submit?"}),Object(n.jsx)("button",{onClick:e.submit,children:"Submit"})]})},x=s.p+"static/media/placeholder.88f89971.png";var g=function(e){return Object(n.jsx)("div",{className:"spinner-container",children:Object(n.jsx)("div",{className:"spinner-background",children:Object(n.jsx)("div",{className:"spinner"})})})},w=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isLoading:!0,movie:{}},n.shouldClose=n.shouldClose.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"shouldClose",value:function(e){var t=document.querySelector(".movie-info"),s=document.getElementById("close-button");t.contains(e.target)&&!s.contains(e.target)||this.props.showInfo()}},{key:"componentDidMount",value:function(){var e=this;document.getElementById("root").addEventListener("click",this.shouldClose,!1);var t=new URL("http://www.omdbapi.com/"),s={i:this.props.imdbID,y:this.props.Year,type:"movie",r:"json",apikey:"b56cbf95"};for(var n in s)t.searchParams.set(n,s[n]);fetch(t).then((function(e){if(!e.ok)throw new Error("Can't find movie info");return e.json()})).then((function(t){return e.setState({isLoading:!1,movie:t})}))}},{key:"componentWillUnmount",value:function(){document.getElementById("root").removeEventListener("click",this.shouldClose)}},{key:"render",value:function(){var e=this.state.movie,t=e.Title,s=e.Year,i=e.Poster,a=e.Director,o=e.Runtime,r=e.Genre,c=e.Language,l=e.Country,h=e.Actors,d=e.Plot;return Object(n.jsxs)("div",{className:"movie-info box",children:[Object(n.jsx)("button",{className:"close-button",id:"close-button",onClick:this.shouldClose,children:Object(n.jsx)("span",{className:"fas fa-times"})}),this.state.isLoading?Object(n.jsx)(g,{}):Object(n.jsxs)("div",{className:"movie-details",children:[Object(n.jsx)("img",{src:i.match(/^http|^www/)?i:x,alt:"".concat(t," movie poster")}),Object(n.jsx)("h4",{children:"".concat(t," (").concat(s,")")}),Object(n.jsx)("span",{children:"by ".concat(a)}),Object(n.jsxs)("dl",{children:[Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Runtime: "}),Object(n.jsx)("dd",{children:o})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Genre: "}),Object(n.jsx)("dd",{children:r})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Language: "}),Object(n.jsx)("dd",{children:c})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Country: "}),Object(n.jsx)("dd",{children:l})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Director: "}),Object(n.jsx)("dd",{children:a})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Cast: "}),Object(n.jsx)("dd",{children:h})]}),Object(n.jsxs)("p",{children:[Object(n.jsx)("dt",{children:"Plot: "}),Object(n.jsx)("dd",{children:d})]})]})]})]})}}]),s}(a.a.Component),y=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={viewingInfo:!1},n.showInfo=n.showInfo.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"showInfo",value:function(){var e=this;this.state.viewingInfo?(document.querySelector(".movie-info").classList.add("disappear"),setTimeout((function(){return e.setState({viewingInfo:!1})}),300)):this.setState({viewingInfo:!0})}},{key:"render",value:function(){var e=this,t=this.props.movie,s=t.imdbID,i=t.Title,a=t.Year,o=t.Poster;return Object(n.jsxs)("li",{children:[Object(n.jsxs)("article",{className:"movie-card movie-card-".concat(this.props.category," box"),id:s,children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:o.match(/^http|^www/)?o:x,alt:"".concat(i," movie poster")}),Object(n.jsxs)("h4",{className:"movie-title",children:[i," (",a,")"]})]}),Object(n.jsxs)("div",{className:"movie-card-buttons",children:[Object(n.jsx)("button",{className:"info-button",onClick:this.showInfo,children:"i"}),"search"===this.props.category&&Object(n.jsx)("button",{className:"nominate-button",value:this.props.movie,onClick:function(){return e.props.nominate(e.props.movie)},disabled:this.props.disableNominate,children:"Nominate"}),"nominations"===this.props.category&&Object(n.jsx)("button",{className:"remove-button",value:this.props.movie,onClick:function(){return e.props.remove(e.props.movie)},children:Object(n.jsx)("span",{className:"fas fa-times"})})]})]}),this.state.viewingInfo&&Object(n.jsx)(w,{imdbID:s,Year:a,showInfo:this.showInfo})]})}}]),s}(a.a.Component),S=s(10);var N=function(e){return function(t){Object(d.a)(i,t);var s=Object(u.a)(i);function i(){var e;Object(c.a)(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=s.call.apply(s,[this].concat(n))).state={shouldRender:e.props.isMounted},e}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(e){var t=this;e.isMounted&&!this.props.isMounted&&this.props.el?(setTimeout((function(){return t.setState({shouldRender:!1})}),300),this.props.el.classList.contains("banner")?this.props.el.classList.add("unpop"):this.props.el.classList.add("disappear")):!e.isMounted&&this.props.isMounted&&this.setState({shouldRender:!0})}},{key:"render",value:function(){return this.state.shouldRender?Object(n.jsx)(e,Object(S.a)({},this.props)):null}}]),i}(a.a.Component)}(f),k=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isOpen:!1},n.open=n.open.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"open",value:function(){this.setState((function(e){return{isOpen:!e.isOpen}}))}},{key:"componentDidUpdate",value:function(){for(var e=0;e<5;e++)this.props.nominatedList[e]?localStorage.setItem("movie-".concat(e+1),JSON.stringify(this.props.nominatedList[e])):localStorage.removeItem("movie-".concat(e+1))}},{key:"render",value:function(){var e=this,t=this.props.nominatedList.length;return Object(n.jsxs)("section",{className:"nominations ".concat(this.state.isOpen?"nominations-active":""," box"),children:[Object(n.jsxs)("div",{className:"nominations-heading",children:[Object(n.jsxs)("h3",{children:["Your nominations: ",Object(n.jsx)("span",{className:"nominations-count",children:t})]}),Object(n.jsx)("button",{className:"dropdown-button",onClick:this.open,children:Object(n.jsx)("span",{className:this.state.isOpen?"fas fa-angle-up":"fas fa-angle-down"})})]}),Object(n.jsx)(N,{isMounted:5===t,el:document.querySelector(".banner"),submit:this.props.submit}),0===t?Object(n.jsx)("p",{className:"nominations-placeholder",children:"No movies nominated yet"}):Object(n.jsx)("ul",{className:"nominated-list",children:this.props.nominatedList.map((function(t){return Object(n.jsx)(y,{movie:t,category:"nominations",isNominated:!0,remove:e.props.remove,getMovieInfo:e.props.getMovieInfo},t.imdbID)}))})]})}}]),s}(a.a.Component),L=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={resultsPage:1,showToTop:!1},n.showMore=n.showMore.bind(Object(h.a)(n)),n.watchScroll=n.watchScroll.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"showMore",value:function(){var e=this;this.setState((function(e){return{resultsPage:e.resultsPage+1}}),(function(){return e.props.search(e.props.searchTerm,e.state.resultsPage,!1)}))}},{key:"watchScroll",value:function(){var e=document.getElementById("search-text-field");e.getBoundingClientRect().top<-window.screen.height&&!1===this.state.showToTop?this.setState({showToTop:!0}):e.getBoundingClientRect().top>=-window.screen.height&&!0===this.state.showToTop&&this.setState({showToTop:!1})}},{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.watchScroll,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.watchScroll)}},{key:"render",value:function(){var e=this,t=this.props.nominatedList.map((function(e){return e.imdbID}));return Object(n.jsxs)("div",{className:"search-results box",children:[Object(n.jsxs)("h3",{children:[this.props.totalResults,' results found for "',this.props.searchTerm,'":']}),Object(n.jsxs)("ul",{children:[this.props.searchResults.map((function(s){return Object(n.jsx)(y,{movie:s,category:"search",disableNominate:t.indexOf(s.imdbID)>=0||5===e.props.nominatedList.length,nominate:e.props.nominate,getMovieInfo:e.props.getMovieInfo},s.imdbID)})),this.props.totalResults>10*this.state.resultsPage&&Object(n.jsx)("button",{className:"show-more-button",onClick:this.showMore,children:"Show more"})]}),this.state.showToTop&&Object(n.jsx)("button",{className:"to-top-button",children:Object(n.jsx)("a",{href:"#search",children:Object(n.jsx)("span",{className:"fas fa-angle-up"})})})]})}}]),s}(a.a.Component);var T=function(e){return Object(n.jsx)("div",{className:"search-alert box",children:Object(n.jsx)("span",{children:e.searchAlert})})},C=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(e){var n;return Object(c.a)(this,s),(n=t.call(this,e)).state={isLoading:!1,searchTerm:"",searchResults:[],totalResults:0,searchAlert:"",nominatedList:[]},n.nominate=n.nominate.bind(Object(h.a)(n)),n.remove=n.remove.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.search=n.search.bind(Object(h.a)(n)),n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.props.localItems&&this.props.localItems.length>0&&this.setState({nominatedList:this.props.localItems})}},{key:"nominate",value:function(e){this.setState((function(t){return{nominatedList:[].concat(Object(v.a)(t.nominatedList),[e])}}))}},{key:"remove",value:function(e){var t=this;document.querySelector(".nominated-list").querySelector("#".concat(e.imdbID)).classList.add("unpop"),setTimeout((function(){return t.setState((function(t){var s=t.nominatedList.indexOf(e),n=t.nominatedList;return n.splice(s,1),{nominatedList:n}}))}),300)}},{key:"handleChange",value:function(e){var t=this,s=e.target.value;this.setState({isLoading:!0,searchTerm:s},(function(){return t.search(t.state.searchTerm.toLowerCase(),1,!1)}))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.search(this.state.searchTerm,1,!0)}},{key:"search",value:function(e,t,s){var n=this;if(""===e)return this.setState({isLoading:!1,searchResults:[],searchAlert:"",totalResults:0});var i=new URL("http://www.omdbapi.com/"),a={s:e,type:"movie",r:"json",apikey:"b56cbf95",page:t};for(var o in a)i.searchParams.set(o,a[o]);fetch(i).then((function(e){if(!e.ok)throw new Error("Can't connect to the API");return e.json()})).then((function(i){if("False"===i.Response){if("Too many results."===i.Error)return n.setState({isLoading:!1,searchResults:[],searchAlert:s&&"Too many results. Try to narrow your search.",totalResults:0});if("Movie not found!"===i.Error)return n.setState({isLoading:!1,searchResults:[],searchAlert:"Can't find \"".concat(e,'". Try searching for something else.'),totalResults:0});throw new Error("There was an error: ",i.Error)}if(t>1){var a=n.state.searchResults,o=[].concat(Object(v.a)(a),Object(v.a)(i.Search));return n.setState({isLoading:!1,searchResults:o,searchAlert:""})}return n.setState({isLoading:!1,searchResults:i.Search,totalResults:i.totalResults,searchAlert:""})}))}},{key:"render",value:function(){return Object(n.jsxs)("section",{className:"movie-lists grid-container",id:"search",children:[Object(n.jsx)("h2",{children:"Choose your favourites"}),Object(n.jsx)(O,{searchTerm:this.state.searchTerm,handleChange:this.handleChange,handleSubmit:this.handleSubmit}),Object(n.jsx)(k,{nominatedList:this.state.nominatedList,remove:this.remove,submit:this.props.submit}),this.state.isLoading&&Object(n.jsx)("div",{className:"search-loading box",children:Object(n.jsx)(g,{})}),this.state.searchResults.length>0&&Object(n.jsx)(L,{searchTerm:this.state.searchTerm,searchResults:this.state.searchResults,totalResults:this.state.totalResults,nominatedList:this.state.nominatedList,nominate:this.nominate,search:this.search}),this.state.searchAlert.length>0&&Object(n.jsx)(T,{searchAlert:this.state.searchAlert})]})}}]),s}(a.a.Component);var I=function(){return Object(n.jsxs)("footer",{children:[Object(n.jsxs)("div",{className:"heading",children:[Object(n.jsx)("img",{className:"logo",src:j,alt:"The Shoppies Movie Awards logo"}),Object(n.jsx)("span",{className:"title",children:"The Shoppies"})]}),Object(n.jsx)("a",{href:"https://dariatsvetkova.ca",target:"_blank",rel:"noreferrer",children:"made by Daria Tsvetkova"}),Object(n.jsx)("small",{children:"Photo by D.Shevtsova via Pexels"})]})},R=function(e){Object(d.a)(s,e);var t=Object(u.a)(s);function s(){var e;return Object(c.a)(this,s),(e=t.call(this)).state={isLoading:!0,isSubmitted:!1},e.submit=e.submit.bind(Object(h.a)(e)),e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.setState({isLoading:!1})}),3e3)}},{key:"submit",value:function(){this.setState({isSubmitted:!0}),localStorage.clear()}},{key:"render",value:function(){var e=function(){if(window.localStorage.length>0){var e=[],t=0;for(var s in window.localStorage)if(s.match(/movie-[1-5]/)){var n=localStorage.getItem(s);"undefined"!==n&&(e[t]=JSON.parse(n),t++)}return e.length>0&&e}}();return Object(n.jsx)("div",{className:"app-container",children:this.state.isLoading?Object(n.jsxs)("div",{className:"greeting",children:[Object(n.jsx)("img",{className:"logo",src:j,alt:"The Shoppies Movie Awards logo"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Welcome to"}),Object(n.jsx)("p",{className:"title",children:"The Shoppies"}),Object(n.jsx)("p",{children:"2021"})]})]}):Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(b,{}),Object(n.jsxs)("main",{children:[Object(n.jsx)(m,{}),this.state.isSubmitted?Object(n.jsx)(p,{}):Object(n.jsx)(C,{localItems:e,submit:this.submit})]}),Object(n.jsx)(I,{})]})})}}]),s}(a.a.Component);r.a.render(Object(n.jsx)(R,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.354a3ffc.chunk.js.map